!function(){var e,d;window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},e=jQuery,(d=window.germanized.admin).dhl_post_label={params:{},init:function(){var a=d.dhl_post_label;a.params=wc_gzd_admin_deutsche_post_label_params,e(document.body).on("wc_gzd_shipments_admin_shipment_modal_after_load_success",a.onLoadLabelModal)},onLoadLabelModal:function(a,i,n){var t=d.dhl_post_label;if(n.$modal.off("change.gzd-dp-fields"),n.$modal.on("change.gzd-dp-fields","#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id",{adminShipmentModal:n},t.onChangeProduct),n.$modal.on("change.gzd-dp-fields","#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id, #wc-gzd-shipment-label-admin-fields-deutsche_post #wc-gzd-shipment-label-wrapper-additional-services :input",{adminShipmentModal:n},t.onRefreshPreview),n.$modal.find("#wc-gzd-shipment-label-admin-fields-deutsche_post").length>0){var l=new e.Event("change");l.data={adminShipmentModal:n},t.onRefreshPreview(l)}},getSelectedAdditionalServices:function(){return e("#wc-gzd-shipment-label-wrapper-additional-services :input:checked").map((function(){return e(this).attr("name").replace("service_","")})).get()},onChangeProduct:function(d){e("#wc-gzd-shipment-label-wrapper-additional-services :input:checked").prop("checked",!1)},onRefreshPreview:function(e){var a=d.dhl_post_label,i=e.data.adminShipmentModal,n={};n.security=a.params.refresh_label_preview_nonce,n.product_id=a.getProductId(),n.selected_services=a.getSelectedAdditionalServices(),n.action="woocommerce_gzd_dhl_refresh_deutsche_post_label_preview",i.doAjax(n,a.onPreviewSuccess)},onPreviewSuccess:function(a){var i=d.dhl_post_label,n=e(".wc-gzd-dhl-im-product-data .col-preview"),t=e(".wc-gzd-dhl-im-product-data").find(".image-preview");a.is_wp_int?n.parents(".wc-gzd-shipment-create-label").find(".page_format_field").hide():n.parents(".wc-gzd-shipment-create-label").find(".page_format_field").show(),a.preview_url?(n.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.find(".stamp-preview").length<=0&&t.append('<img class="stamp-preview" style="display: none;" />'),i.replaceProductData(a.preview_data),t.find(".stamp-preview").prop("src",a.preview_url).on("load",(function(){n.unblock(),e(this).show()}))):(t.html(""),i.replaceProductData({}))},getProductId:function(){return e("#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id").val()},replaceProductData:function(a){d.dhl_post_label;var i=e(".wc-gzd-shipment-create-label").find(".wc-gzd-dhl-im-product-data");i.find(".data-placeholder").html(""),i.find(".data-placeholder").each((function(){var d=e(this).data("replace");a.hasOwnProperty(d)?(e(this).html(a[d]),e(this).show()):e(this).hide()}))}},e(document).ready((function(){germanized.admin.dhl_post_label.init()})),((window.germanizedShipments=window.germanizedShipments||{}).static=window.germanizedShipments.static||{})["admin-deutsche-post-label"]={}}();